{"ast":null,"code":"import _slicedToArray from\"D:/funix/NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import'./auth.css';import{useDispatch}from\"react-redux\";import{setTouched}from\"../hook/lib\";import{useNavigate}from\"react-router-dom\";import Input from\"../UI/Input\";import ErrorModal from\"../UI/ErrorModal\";import{onBlurHandler,onChangeHanlder,validEmail,validLength,validRequire}from\"../../util/validators\";import PageContainer from\"../pageContainer/PageContainer\";import queryString from\"query-string\";import UserAPI from\"../../API/UserAPI\";import setCookie from\"../../setCookie\";import{addSession}from'../Redux/Action/ActionSession';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignUp=function SignUp(pros){var _useState=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState2=_slicedToArray(_useState,2),fullname=_useState2[0],setFullname=_useState2[1];var _useState3=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validEmail,validRequire]}),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState8=_slicedToArray(_useState7,2),phone=_useState8[0],setPhone=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];// const { users } = useAPI();\nvar dispatch=useDispatch();var navigate=useNavigate();var signUpHandler=function signUpHandler(e){e.preventDefault();setTouched(setFullname);setTouched(setEmail);setTouched(setPassword);setTouched(setPhone);if(!email.valid||!password.valid){return setError({title:'Validation failed!',message:'Invalid email or password!'});}if(email.valid&&password.valid&&fullname.valid&&phone.valid){var params={email:email.value,password:password.value,fullname:fullname.value,phone:phone.value};var query='?'+queryString.stringify(params);UserAPI.postSignUp(query).then(function(response){console.log(response);if(response){console.log(response);navigate('/auth/login');}}).catch(function(err){if(err.response.status){setError({title:'Validation failed!',message:err.response.data.message});}});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(ErrorModal,{title:error.title,message:error.message,onConfirm:function onConfirm(){return setError(null);},error:!!error}),/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsxs(\"main\",{className:\"centered\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SignUp\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"fullname\",type:\"text\",placeholder:\"fullname\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setFullname,fullname.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setFullname,fullname.validators);},value:fullname.value,isValid:fullname.valid,isTouched:fullname.touched}),/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"email\",type:\"email\",placeholder:\"email\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setEmail,email.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setEmail,email.validators);},value:email.value,isValid:email.valid,isTouched:email.touched}),/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"password\",type:\"password\",placeholder:\"password\",onChange:function onChange(e){return onChangeHanlder(e,setPassword,password.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setPassword,password.validators);},required:true,value:password.value,isValid:password.valid,isTouched:password.touched}),/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"phone\",type:\"tel\",placeholder:\"phone\",onChange:function onChange(e){return onChangeHanlder(e,setPhone,phone.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setPhone,phone.validators);},required:true,value:phone.value,isValid:phone.valid,isTouched:phone.touched}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",onClick:signUpHandler,children:\"SignUp\"})]})]})})]});};export default SignUp;","map":{"version":3,"sources":["D:/funix/NJS301x_1.0-A_VN Lập trình Web Back-End với NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/src/components/auth/SignUp.jsx"],"names":["useState","useDispatch","setTouched","useNavigate","Input","ErrorModal","onBlurHandler","onChangeHanlder","validEmail","validLength","validRequire","PageContainer","queryString","UserAPI","setCookie","addSession","SignUp","pros","value","valid","touched","validators","min","fullname","setFullname","email","setEmail","password","setPassword","phone","setPhone","error","setError","dispatch","navigate","signUpHandler","e","preventDefault","title","message","params","query","stringify","postSignUp","then","response","console","log","catch","err","status","data"],"mappings":"6MAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAO,YAAP,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,aAA3B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,OAASC,aAAT,CAAwBC,eAAxB,CAAyCC,UAAzC,CAAqDC,WAArD,CAAkEC,YAAlE,KAAsF,uBAAtF,CACA,MAAOC,CAAAA,aAAP,KAA0B,gCAA1B,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,iBAAtB,CACA,OAASC,UAAT,KAA2B,+BAA3B,C,6IAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,CAAU,CACvB,cAAgCjB,QAAQ,CAAC,CACvCkB,KAAK,CAAE,EADgC,CAEvCC,KAAK,CAAE,KAFgC,CAGvCC,OAAO,CAAE,KAH8B,CAIvCC,UAAU,CAAE,CAACZ,WAAW,CAAC,CAAEa,GAAG,CAAE,CAAP,CAAD,CAAZ,CAA0BZ,YAA1B,CAJ2B,CAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eAMA,eAA0BxB,QAAQ,CAAC,CACjCkB,KAAK,CAAE,EAD0B,CAEjCC,KAAK,CAAE,KAF0B,CAGjCC,OAAO,CAAE,KAHwB,CAIjCC,UAAU,CAAE,CAACZ,WAAW,CAAC,CAAEa,GAAG,CAAE,CAAP,CAAD,CAAZ,CAA0Bd,UAA1B,CAAsCE,YAAtC,CAJqB,CAAD,CAAlC,yCAAOe,KAAP,eAAcC,QAAd,eAMA,eAAgC1B,QAAQ,CAAC,CACvCkB,KAAK,CAAE,EADgC,CAEvCC,KAAK,CAAE,KAFgC,CAGvCC,OAAO,CAAE,KAH8B,CAIvCC,UAAU,CAAE,CAACZ,WAAW,CAAC,CAAEa,GAAG,CAAE,CAAP,CAAD,CAAZ,CAA0BZ,YAA1B,CAJ2B,CAAD,CAAxC,yCAAOiB,QAAP,eAAiBC,WAAjB,eAMA,eAA0B5B,QAAQ,CAAC,CACjCkB,KAAK,CAAE,EAD0B,CAEjCC,KAAK,CAAE,KAF0B,CAGjCC,OAAO,CAAE,KAHwB,CAIjCC,UAAU,CAAE,CAACZ,WAAW,CAAC,CAAEa,GAAG,CAAE,CAAP,CAAD,CAAZ,CAA0BZ,YAA1B,CAJqB,CAAD,CAAlC,yCAAOmB,KAAP,eAAcC,QAAd,eAMA,eAA0B9B,QAAQ,EAAlC,0CAAO+B,KAAP,gBAAcC,QAAd,gBAEA;AACA,GAAMC,CAAAA,QAAQ,CAAGhC,WAAW,EAA5B,CACA,GAAMiC,CAAAA,QAAQ,CAAG/B,WAAW,EAA5B,CAGA,GAAMgC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BA,CAAC,CAACC,cAAF,GAEAnC,UAAU,CAACsB,WAAD,CAAV,CACAtB,UAAU,CAACwB,QAAD,CAAV,CACAxB,UAAU,CAAC0B,WAAD,CAAV,CACA1B,UAAU,CAAC4B,QAAD,CAAV,CAEA,GAAG,CAACL,KAAK,CAACN,KAAP,EAAgB,CAACQ,QAAQ,CAACR,KAA7B,CAAoC,CAClC,MAAOa,CAAAA,QAAQ,CAAC,CACdM,KAAK,CAAE,oBADO,CAEdC,OAAO,CAAE,4BAFK,CAAD,CAAf,CAID,CAED,GAAGd,KAAK,CAACN,KAAN,EAAeQ,QAAQ,CAACR,KAAxB,EAAiCI,QAAQ,CAACJ,KAA1C,EAAmDU,KAAK,CAACV,KAA5D,CAAmE,CAC/D,GAAMqB,CAAAA,MAAM,CAAG,CACbf,KAAK,CAAEA,KAAK,CAACP,KADA,CAEbS,QAAQ,CAAEA,QAAQ,CAACT,KAFN,CAGbK,QAAQ,CAAEA,QAAQ,CAACL,KAHN,CAIbW,KAAK,CAAEA,KAAK,CAACX,KAJA,CAAf,CAMA,GAAMuB,CAAAA,KAAK,CAAG,IAAM7B,WAAW,CAAC8B,SAAZ,CAAsBF,MAAtB,CAApB,CACA3B,OAAO,CAAC8B,UAAR,CAAmBF,KAAnB,EACGG,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACA,GAAGA,QAAH,CAAa,CACXC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAX,QAAQ,CAAC,aAAD,CAAR,CACD,CACF,CAPH,EAQGc,KARH,CAQS,SAAAC,GAAG,CAAI,CACZ,GAAGA,GAAG,CAACJ,QAAJ,CAAaK,MAAhB,CAAwB,CACtBlB,QAAQ,CAAC,CACPM,KAAK,CAAE,oBADA,CAEPC,OAAO,CAAEU,GAAG,CAACJ,QAAJ,CAAaM,IAAb,CAAkBZ,OAFpB,CAAD,CAAR,CAID,CACF,CAfH,EAgBH,CACF,CAxCD,CA0CA,mBACE,2BACGR,KAAK,eACJ,KAAC,UAAD,EACE,KAAK,CAAEA,KAAK,CAACO,KADf,CAEE,OAAO,CAAEP,KAAK,CAACQ,OAFjB,CAGE,SAAS,CAAE,2BAAMP,CAAAA,QAAQ,CAAC,IAAD,CAAd,EAHb,CAIE,KAAK,CAAE,CAAC,CAACD,KAJX,EAFJ,cASE,KAAC,aAAD,wBACE,cAAM,SAAS,CAAC,UAAhB,wBACE,8BADF,cAEE,cAAM,SAAS,CAAC,YAAhB,wBACE,KAAC,KAAD,EACE,OAAO,CAAC,OADV,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,MAHP,CAIE,WAAW,CAAC,UAJd,CAKE,QAAQ,CAAE,IALZ,CAME,QAAQ,CAAE,kBAAAK,CAAC,QAAI7B,CAAAA,eAAe,CAAC6B,CAAD,CAAIZ,WAAJ,CAAiBD,QAAQ,CAACF,UAA1B,CAAnB,EANb,CAOE,MAAM,CAAE,gBAAAe,CAAC,QAAI9B,CAAAA,aAAa,CAAC8B,CAAD,CAAIZ,WAAJ,CAAiBD,QAAQ,CAACF,UAA1B,CAAjB,EAPX,CAQE,KAAK,CAAEE,QAAQ,CAACL,KARlB,CASE,OAAO,CAAEK,QAAQ,CAACJ,KATpB,CAUE,SAAS,CAAEI,QAAQ,CAACH,OAVtB,EADF,cAaE,KAAC,KAAD,EACE,OAAO,CAAC,OADV,CAEE,EAAE,CAAC,OAFL,CAGE,IAAI,CAAC,OAHP,CAIE,WAAW,CAAC,OAJd,CAKE,QAAQ,CAAE,IALZ,CAME,QAAQ,CAAE,kBAAAgB,CAAC,QAAI7B,CAAAA,eAAe,CAAC6B,CAAD,CAAIV,QAAJ,CAAcD,KAAK,CAACJ,UAApB,CAAnB,EANb,CAOE,MAAM,CAAE,gBAAAe,CAAC,QAAI9B,CAAAA,aAAa,CAAC8B,CAAD,CAAIV,QAAJ,CAAcD,KAAK,CAACJ,UAApB,CAAjB,EAPX,CAQE,KAAK,CAAEI,KAAK,CAACP,KARf,CASE,OAAO,CAAEO,KAAK,CAACN,KATjB,CAUE,SAAS,CAAEM,KAAK,CAACL,OAVnB,EAbF,cAyBE,KAAC,KAAD,EACE,OAAO,CAAC,OADV,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,UAHP,CAIE,WAAW,CAAC,UAJd,CAKE,QAAQ,CAAE,kBAAAgB,CAAC,QAAI7B,CAAAA,eAAe,CAAC6B,CAAD,CAAIR,WAAJ,CAAiBD,QAAQ,CAACN,UAA1B,CAAnB,EALb,CAME,MAAM,CAAE,gBAAAe,CAAC,QAAI9B,CAAAA,aAAa,CAAC8B,CAAD,CAAIR,WAAJ,CAAiBD,QAAQ,CAACN,UAA1B,CAAjB,EANX,CAOE,QAAQ,CAAE,IAPZ,CAQE,KAAK,CAAEM,QAAQ,CAACT,KARlB,CASE,OAAO,CAAES,QAAQ,CAACR,KATpB,CAUE,SAAS,CAAEQ,QAAQ,CAACP,OAVtB,EAzBF,cAqCE,KAAC,KAAD,EACE,OAAO,CAAC,OADV,CAEE,EAAE,CAAC,OAFL,CAGE,IAAI,CAAC,KAHP,CAIE,WAAW,CAAC,OAJd,CAKE,QAAQ,CAAE,kBAAAgB,CAAC,QAAI7B,CAAAA,eAAe,CAAC6B,CAAD,CAAIN,QAAJ,CAAcD,KAAK,CAACR,UAApB,CAAnB,EALb,CAME,MAAM,CAAE,gBAAAe,CAAC,QAAI9B,CAAAA,aAAa,CAAC8B,CAAD,CAAIN,QAAJ,CAAcD,KAAK,CAACR,UAApB,CAAjB,EANX,CAOE,QAAQ,CAAE,IAPZ,CAQE,KAAK,CAAEQ,KAAK,CAACX,KARf,CASE,OAAO,CAAEW,KAAK,CAACV,KATjB,CAUE,SAAS,CAAEU,KAAK,CAACT,OAVnB,EArCF,cAiDE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,KAFZ,CAGE,OAAO,CAAEe,aAHX,oBAjDF,GAFF,GADF,EATF,GADF,CAwED,CAlJD,CAoJA,cAAenB,CAAAA,MAAf","sourcesContent":["import { useState } from \"react\";\r\nimport './auth.css'\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setTouched } from \"../hook/lib\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Input from \"../UI/Input\";\r\nimport ErrorModal from \"../UI/ErrorModal\";\r\nimport { onBlurHandler, onChangeHanlder, validEmail, validLength, validRequire } from \"../../util/validators\";\r\nimport PageContainer from \"../pageContainer/PageContainer\";\r\nimport queryString from \"query-string\";\r\nimport UserAPI from \"../../API/UserAPI\";\r\nimport setCookie from \"../../setCookie\";\r\nimport { addSession } from '../Redux/Action/ActionSession';\r\n\r\nconst SignUp = (pros) => {\r\n  const [fullname, setFullname] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validEmail, validRequire]\r\n  });\r\n  const [password, setPassword] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [phone, setPhone] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [error, setError] = useState();\r\n\r\n  // const { users } = useAPI();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n\r\n  const signUpHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    setTouched(setFullname);\r\n    setTouched(setEmail);\r\n    setTouched(setPassword);\r\n    setTouched(setPhone);\r\n\r\n    if(!email.valid || !password.valid) {\r\n      return setError({\r\n        title: 'Validation failed!',\r\n        message: 'Invalid email or password!'\r\n      })\r\n    }\r\n\r\n    if(email.valid && password.valid && fullname.valid && phone.valid) {\r\n        const params = {\r\n          email: email.value,\r\n          password: password.value,\r\n          fullname: fullname.value,\r\n          phone: phone.value\r\n        };\r\n        const query = '?' + queryString.stringify(params);\r\n        UserAPI.postSignUp(query)\r\n          .then(response => {\r\n            console.log(response);\r\n            if(response) {\r\n              console.log(response);\r\n              navigate('/auth/login');\r\n            }\r\n          })\r\n          .catch(err => {\r\n            if(err.response.status) {\r\n              setError({\r\n                title: 'Validation failed!',\r\n                message: err.response.data.message\r\n              })\r\n            }\r\n          });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <ErrorModal \r\n          title={error.title}\r\n          message={error.message}\r\n          onConfirm={() => setError(null)}\r\n          error={!!error}\r\n        />\r\n      )}\r\n      <PageContainer>\r\n        <main className=\"centered\">\r\n          <h1>SignUp</h1>\r\n          <form className=\"form-group\">\r\n            <Input\r\n              control=\"input\"\r\n              id=\"fullname\"\r\n              type=\"text\" \r\n              placeholder=\"fullname\" \r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setFullname, fullname.validators)}\r\n              onBlur={e => onBlurHandler(e, setFullname, fullname.validators)}\r\n              value={fullname.value}\r\n              isValid={fullname.valid}\r\n              isTouched={fullname.touched}\r\n            />\r\n            <Input\r\n              control=\"input\"\r\n              id=\"email\"\r\n              type=\"email\" \r\n              placeholder=\"email\" \r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setEmail, email.validators)}\r\n              onBlur={e => onBlurHandler(e, setEmail, email.validators)}\r\n              value={email.value}\r\n              isValid={email.valid}\r\n              isTouched={email.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"password\"\r\n              type=\"password\" \r\n              placeholder=\"password\"\r\n              onChange={e => onChangeHanlder(e, setPassword, password.validators)}\r\n              onBlur={e => onBlurHandler(e, setPassword, password.validators)}\r\n              required={true}\r\n              value={password.value}\r\n              isValid={password.valid}\r\n              isTouched={password.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"phone\"\r\n              type=\"tel\" \r\n              placeholder=\"phone\"\r\n              onChange={e => onChangeHanlder(e, setPhone, phone.validators)}\r\n              onBlur={e => onBlurHandler(e, setPhone, phone.validators)}\r\n              required={true}\r\n              value={phone.value}\r\n              isValid={phone.valid}\r\n              isTouched={phone.touched}\r\n            />\r\n            <button \r\n              type=\"submit\" \r\n              className=\"btn\"\r\n              onClick={signUpHandler}\r\n            >SignUp</button>\r\n          </form>\r\n        </main>\r\n      </PageContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}