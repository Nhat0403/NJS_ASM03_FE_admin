{"ast":null,"code":"import _defineProperty from\"D:/funix/NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"D:/funix/NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/funix/NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\funix\\\\NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS\\\\assignment 03\\\\Frontend Assignemnt 03 Admin App\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{useContext,useEffect,useState}from'react';import'./AddProduct.css';import{useNavigate}from\"react-router-dom\";import PageContainer from\"../pageContainer/PageContainer\";import Card from\"../UI/Card\";import Input from\"../UI/Input\";import{onBlurHandler,onChangeHanlder,onFileHandler,validLength,validNumber,validRequire}from\"../../util/validators\";import{setTouched}from\"../hook/lib\";import ErrorModal from\"../UI/ErrorModal\";import FilePicker from\"../UI/FilePicker\";import queryString from\"query-string\";import ProductAPI from\"../../API/ProductAPI\";import Image from\"../UI/Image\";import{generateBase64FromImage}from\"../../util/image\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddProduct=function AddProduct(){var _useState=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState({value:'',valid:false,touched:false,validators:[validNumber({min:1}),validRequire]}),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState8=_slicedToArray(_useState7,2),shortDesc=_useState8[0],setShortDesc=_useState8[1];var _useState9=useState({value:'',valid:false,touched:false,validators:[validLength({min:4}),validRequire]}),_useState10=_slicedToArray(_useState9,2),longDesc=_useState10[0],setLongDesc=_useState10[1];var _useState11=useState({value:'',valid:false,touched:false,validators:[validRequire]}),_useState12=_slicedToArray(_useState11,2),images=_useState12[0],setImages=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var navigate=useNavigate();var cookieId=document.cookie.split('=')[1];var addHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _params,params,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setTouched(setName);setTouched(setCategory);setTouched(setPrice);setTouched(setShortDesc);setTouched(setLongDesc);if(!(images.value.length>5)){_context.next=9;break;}setError({title:'Images invalid',message:'Limit 5 images!'});return _context.abrupt(\"return\");case 9:if(!(!name.valid||!category.valid||!price.valid||!shortDesc.valid||!longDesc.valid)){_context.next=13;break;}return _context.abrupt(\"return\");case 13:params=(_params={category:category.value,img1:images.value[0],// img2: images.value[1],\n// img3: images.value[2],\n// img4: images.value[3],\n// img5: images.value[4],\nlong_desc:longDesc.value,name:name.value,price:Math.random(),short_desc:shortDesc.value},_defineProperty(_params,\"price\",price.value),_defineProperty(_params,\"cookieId\",cookieId),_params);// const query = '?' + queryString.stringify(params);\n// const response = await ProductAPI.postAddProduct(query, params.img1);\n_context.next=16;return fetch('http://localhost:5000/add-product',{method:'POST',body:params.img1,// query: cookieId,\nheaders:{'Content-Type':'application/json'}});case 16:response=_context.sent;console.log(response);// console.log(images.value[0])\ncase 18:case\"end\":return _context.stop();}}},_callee);}));return function addHandler(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(e){console.log(e.target);};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(ErrorModal,{title:error.title,message:error.message,onConfirm:function onConfirm(){return setError(null);},error:!!error}),/*#__PURE__*/_jsxs(PageContainer,{children:[/*#__PURE__*/_jsx(Card,{className:\"ahCard\",children:/*#__PURE__*/_jsx(\"div\",{className:\"listTitle ahListTitle\",children:\"add product\"})}),/*#__PURE__*/_jsx(Card,{className:\"ahCardForm\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"ahFormControl\",children:[/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"name\",type:\"text\",placeholder:\"Enter Product Name\",label:\"Product Name\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setName,name.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setName,name.validators);},value:name.value,isValid:name.valid,isTouched:name.touched}),/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"category\",type:\"text\",placeholder:\"Enter Category\",label:\"Category\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setCategory,category.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setCategory,category.validators);},value:category.value,isValid:category.valid,isTouched:category.touched}),/*#__PURE__*/_jsx(Input,{control:\"input\",id:\"price\",type:\"Number\",placeholder:\"Enter price\",label:\"price\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setPrice,price.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setPrice,price.validators);},value:price.value,isValid:price.valid,isTouched:price.touched,min:1}),/*#__PURE__*/_jsx(Input,{control:\"textarea\",id:\"shortDesc\",type:\"text\",placeholder:\"Enter Short Description\",label:\"Short Description\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setShortDesc,shortDesc.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setShortDesc,shortDesc.validators);},value:shortDesc.value,isValid:shortDesc.valid,isTouched:shortDesc.touched,rows:5,cols:5}),/*#__PURE__*/_jsx(Input,{control:\"textarea\",id:\"longDesc\",type:\"text\",placeholder:\"Enter Long Description\",label:\"Long Description\",required:true,onChange:function onChange(e){return onChangeHanlder(e,setLongDesc,longDesc.validators);},onBlur:function onBlur(e){return onBlurHandler(e,setLongDesc,longDesc.validators);},value:longDesc.value,isValid:longDesc.valid,isTouched:longDesc.touched,rows:5,cols:5}),/*#__PURE__*/_jsx(FilePicker,{control:\"input\",id:\"images\",placeholder:\"Enter Images\",label:\"Upload image (5 images)\",required:true,onChange:function onChange(e){return onFileHandler(e,setImages);},multiple:true}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15px'},children:images.imagePreview&&images.imagePreview.map(function(i){return/*#__PURE__*/_jsx(Image,{imageUrl:i,contain:true},i);})}),/*#__PURE__*/_jsx(\"button\",{className:\"btnSend\",onClick:addHandler,children:\"Submit\"})]})})]})]});};export default AddProduct;","map":{"version":3,"sources":["D:/funix/NJS301x_1.0-A_VN Lập trình Web Back-End với NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/src/components/addProduct/AddProduct.jsx"],"names":["axios","useContext","useEffect","useState","useNavigate","PageContainer","Card","Input","onBlurHandler","onChangeHanlder","onFileHandler","validLength","validNumber","validRequire","setTouched","ErrorModal","FilePicker","queryString","ProductAPI","Image","generateBase64FromImage","AddProduct","value","valid","touched","validators","min","name","setName","category","setCategory","price","setPrice","shortDesc","setShortDesc","longDesc","setLongDesc","images","setImages","error","setError","navigate","cookieId","document","cookie","split","addHandler","e","preventDefault","length","title","message","params","img1","long_desc","Math","random","short_desc","fetch","method","body","headers","response","console","log","onChange","target","marginTop","imagePreview","map","i"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport './AddProduct.css';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport PageContainer from \"../pageContainer/PageContainer\";\r\nimport Card from \"../UI/Card\";\r\nimport Input from \"../UI/Input\";\r\nimport { onBlurHandler, onChangeHanlder, onFileHandler, validLength, validNumber, validRequire } from \"../../util/validators\";\r\nimport { setTouched } from \"../hook/lib\";\r\nimport ErrorModal from \"../UI/ErrorModal\";\r\nimport FilePicker from \"../UI/FilePicker\";\r\nimport queryString from \"query-string\";\r\nimport ProductAPI from \"../../API/ProductAPI\";\r\nimport Image from \"../UI/Image\";\r\nimport { generateBase64FromImage } from \"../../util/image\";\r\n\r\nconst AddProduct = () => {\r\n  const [name, setName] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [category, setCategory] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [price, setPrice] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validNumber({ min: 1 }), validRequire]\r\n  });\r\n  const [shortDesc, setShortDesc] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [longDesc, setLongDesc] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [images, setImages] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validRequire]\r\n  });\r\n  const [error, setError] = useState();\r\n  const navigate = useNavigate();\r\n  const cookieId = document.cookie.split('=')[1];\r\n\r\n  const addHandler = async(e) => {\r\n    e.preventDefault();\r\n\r\n    setTouched(setName);\r\n    setTouched(setCategory);\r\n    setTouched(setPrice);\r\n    setTouched(setShortDesc);\r\n    setTouched(setLongDesc);\r\n\r\n    if(images.value.length > 5) {\r\n      setError({\r\n        title: 'Images invalid',\r\n        message: 'Limit 5 images!'\r\n      })\r\n      return;\r\n    }\r\n\r\n    if(\r\n      !name.valid ||\r\n      !category.valid ||\r\n      !price.valid ||\r\n      !shortDesc.valid ||\r\n      !longDesc.valid\r\n    ) {\r\n      return;\r\n    } else {\r\n      const params = {\r\n        category: category.value,\r\n        img1: images.value[0],\r\n        // img2: images.value[1],\r\n        // img3: images.value[2],\r\n        // img4: images.value[3],\r\n        // img5: images.value[4],\r\n        long_desc: longDesc.value,\r\n        name: name.value,\r\n        price: Math.random(),\r\n        short_desc: shortDesc.value,\r\n        price: price.value,\r\n        cookieId: cookieId\r\n      }\r\n      // const query = '?' + queryString.stringify(params);\r\n      // const response = await ProductAPI.postAddProduct(query, params.img1);\r\n      const response = await fetch('http://localhost:5000/add-product', {\r\n        method: 'POST',\r\n        body: params.img1,\r\n        // query: cookieId,\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      console.log(response);\r\n      // console.log(images.value[0])\r\n    }\r\n  }\r\n\r\n  const onChange = e => {\r\n    console.log(e.target)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <ErrorModal\r\n          title={error.title}\r\n          message={error.message}\r\n          onConfirm={() => setError(null)}\r\n          error={!!error}\r\n        />\r\n      )}\r\n      <PageContainer>\r\n        <Card className=\"ahCard\">\r\n          <div className=\"listTitle ahListTitle\">add product</div>\r\n        </Card>\r\n        <Card className=\"ahCardForm\">\r\n          <form className=\"ahFormControl\">\r\n            <Input \r\n              control=\"input\"\r\n              id=\"name\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Product Name\"\r\n              label=\"Product Name\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setName, name.validators)}\r\n              onBlur={e => onBlurHandler(e, setName, name.validators)}\r\n              value={name.value}\r\n              isValid={name.valid}\r\n              isTouched={name.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"category\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Category\"\r\n              label=\"Category\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setCategory, category.validators)}\r\n              onBlur={e => onBlurHandler(e, setCategory, category.validators)}\r\n              value={category.value}\r\n              isValid={category.valid}\r\n              isTouched={category.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"price\"\r\n              type=\"Number\"\r\n              placeholder=\"Enter price\"\r\n              label=\"price\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setPrice, price.validators)}\r\n              onBlur={e => onBlurHandler(e, setPrice, price.validators)}\r\n              value={price.value}\r\n              isValid={price.valid}\r\n              isTouched={price.touched}\r\n              min={1}\r\n            />\r\n            <Input \r\n              control=\"textarea\"\r\n              id=\"shortDesc\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Short Description\"\r\n              label=\"Short Description\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setShortDesc, shortDesc.validators)}\r\n              onBlur={e => onBlurHandler(e, setShortDesc, shortDesc.validators)}\r\n              value={shortDesc.value}\r\n              isValid={shortDesc.valid}\r\n              isTouched={shortDesc.touched}\r\n              rows={5}\r\n              cols={5}\r\n            />\r\n            <Input \r\n              control=\"textarea\"\r\n              id=\"longDesc\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Long Description\"\r\n              label=\"Long Description\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setLongDesc, longDesc.validators)}\r\n              onBlur={e => onBlurHandler(e, setLongDesc, longDesc.validators)}\r\n              value={longDesc.value}\r\n              isValid={longDesc.valid}\r\n              isTouched={longDesc.touched}\r\n              rows={5}\r\n              cols={5}\r\n            />\r\n            <FilePicker\r\n              control=\"input\"\r\n              id=\"images\"\r\n              placeholder=\"Enter Images\"\r\n              label=\"Upload image (5 images)\"\r\n              required={true}\r\n              onChange={e => onFileHandler(e, setImages)}\r\n              multiple={true}\r\n            />\r\n            <div style={{ marginTop: '15px' }}>\r\n              {images.imagePreview && \r\n                images.imagePreview.map(i => <Image imageUrl={i} key={i} contain />)\r\n              }\r\n            </div>\r\n            <button \r\n              className=\"btnSend\"\r\n              onClick={addHandler}\r\n            >Submit\r\n            </button>\r\n          </form>\r\n        </Card>\r\n      </PageContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}