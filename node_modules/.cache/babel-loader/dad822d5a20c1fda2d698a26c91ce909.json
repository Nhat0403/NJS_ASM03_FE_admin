{"ast":null,"code":"var _jsxFileName = \"D:\\\\funix\\\\NJS301x_1.0-A_VN L\\u1EADp tr\\xECnh Web Back-End v\\u1EDBi NodeJS\\\\assignment 03\\\\Frontend Assignemnt 03 Admin App\\\\src\\\\components\\\\addProduct\\\\AddProduct.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useContext, useEffect, useState } from 'react';\nimport './AddProduct.css';\nimport { useNavigate } from \"react-router-dom\";\nimport PageContainer from \"../pageContainer/PageContainer\";\nimport Card from \"../UI/Card\";\nimport Input from \"../UI/Input\";\nimport { onBlurHandler, onChangeHanlder, onFileHandler, validLength, validNumber, validRequire } from \"../../util/validators\";\nimport { setTouched } from \"../hook/lib\";\nimport ErrorModal from \"../UI/ErrorModal\";\nimport FilePicker from \"../UI/FilePicker\";\nimport queryString from \"query-string\";\nimport ProductAPI from \"../../API/ProductAPI\";\nimport Image from \"../UI/Image\";\nimport { generateBase64FromImage } from \"../../util/image\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AddProduct = () => {\n  _s();\n\n  const [name, setName] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validLength({\n      min: 4\n    }), validRequire]\n  });\n  const [category, setCategory] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validLength({\n      min: 4\n    }), validRequire]\n  });\n  const [price, setPrice] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validNumber({\n      min: 1\n    }), validRequire]\n  });\n  const [shortDesc, setShortDesc] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validLength({\n      min: 4\n    }), validRequire]\n  });\n  const [longDesc, setLongDesc] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validLength({\n      min: 4\n    }), validRequire]\n  });\n  const [images, setImages] = useState({\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [validRequire]\n  });\n  const [error, setError] = useState();\n  const navigate = useNavigate();\n  const cookieId = document.cookie.split('=')[1];\n\n  const addHandler = async e => {\n    e.preventDefault();\n    console.log(images.value.length > 5);\n    setTouched(setName);\n    setTouched(setCategory);\n    setTouched(setShortDesc);\n    setTouched(setLongDesc);\n\n    if (images.value.length > 5) {\n      setError({\n        title: 'Images invalid',\n        message: 'Limit 5 images!'\n      });\n      return;\n    }\n\n    if (!name.valid || !category.valid || !price.valid || !shortDesc.valid || !longDesc.valid) {\n      console.log('ok');\n      const params = {\n        category: category.value,\n        img1: images.value[0],\n        img2: images.value[1],\n        img3: images.value[2],\n        img4: images.value[3],\n        img5: images.value[4],\n        long_desc: longDesc.value,\n        name: name.value,\n        price: Math.random(),\n        short_desc: shortDesc.value,\n        price: price.value,\n        cookieId: cookieId\n      };\n      const query = '?' + queryString.stringify(params);\n      const response = await ProductAPI.postAddProduct(query);\n      console.log(response);\n    } else {\n      console.log('no');\n    }\n  };\n\n  const onChange = e => {\n    console.log(e.target);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [error && /*#__PURE__*/_jsxDEV(ErrorModal, {\n      title: error.title,\n      message: error.message,\n      onConfirm: () => setError(null),\n      error: !!error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(PageContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"ahCard\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listTitle ahListTitle\",\n          children: \"add product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"ahCardForm\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"ahFormControl\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            control: \"input\",\n            id: \"name\",\n            type: \"text\",\n            placeholder: \"Enter Product Name\",\n            label: \"Product Name\",\n            required: true,\n            onChange: e => onChangeHanlder(e, setName, name.validators),\n            onBlur: e => onBlurHandler(e, setName, name.validators),\n            value: name.value,\n            isValid: name.valid,\n            isTouched: name.touched\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            control: \"input\",\n            id: \"category\",\n            type: \"text\",\n            placeholder: \"Enter Category\",\n            label: \"Category\",\n            required: true,\n            onChange: e => onChangeHanlder(e, setCategory, category.validators),\n            onBlur: e => onBlurHandler(e, setCategory, category.validators),\n            value: category.value,\n            isValid: category.valid,\n            isTouched: category.touched\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            control: \"input\",\n            id: \"price\",\n            type: \"Number\",\n            placeholder: \"Enter price\",\n            label: \"price\",\n            required: true,\n            onChange: e => onChangeHanlder(e, setPrice, price.validators),\n            onBlur: e => onBlurHandler(e, setPrice, price.validators),\n            value: price.value,\n            isValid: price.valid,\n            isTouched: price.touched,\n            min: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            control: \"textarea\",\n            id: \"shortDesc\",\n            type: \"text\",\n            placeholder: \"Enter Short Description\",\n            label: \"Short Description\",\n            required: true,\n            onChange: e => onChangeHanlder(e, setShortDesc, shortDesc.validators),\n            onBlur: e => onBlurHandler(e, setShortDesc, shortDesc.validators),\n            value: shortDesc.value,\n            isValid: shortDesc.valid,\n            isTouched: shortDesc.touched,\n            rows: 5,\n            cols: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            control: \"textarea\",\n            id: \"longDesc\",\n            type: \"text\",\n            placeholder: \"Enter Long Description\",\n            label: \"Long Description\",\n            required: true,\n            onChange: e => onChangeHanlder(e, setLongDesc, longDesc.validators),\n            onBlur: e => onBlurHandler(e, setLongDesc, longDesc.validators),\n            value: longDesc.value,\n            isValid: longDesc.valid,\n            isTouched: longDesc.touched,\n            rows: 5,\n            cols: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FilePicker, {\n            control: \"input\",\n            id: \"images\",\n            placeholder: \"Enter Images\",\n            label: \"Upload image (5 images)\",\n            required: true,\n            onChange: e => onFileHandler(e, setImages),\n            multiple: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '15px'\n            },\n            children: images.imagePreview && images.imagePreview.map(i => /*#__PURE__*/_jsxDEV(Image, {\n              imageUrl: i,\n              contain: true\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 46\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btnSend\",\n            onClick: addHandler,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AddProduct, \"bECJdSAI7c5HpV3SiTC7NuFz8ng=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["D:/funix/NJS301x_1.0-A_VN Lập trình Web Back-End với NodeJS/assignment 03/Frontend Assignemnt 03 Admin App/src/components/addProduct/AddProduct.jsx"],"names":["axios","useContext","useEffect","useState","useNavigate","PageContainer","Card","Input","onBlurHandler","onChangeHanlder","onFileHandler","validLength","validNumber","validRequire","setTouched","ErrorModal","FilePicker","queryString","ProductAPI","Image","generateBase64FromImage","AddProduct","name","setName","value","valid","touched","validators","min","category","setCategory","price","setPrice","shortDesc","setShortDesc","longDesc","setLongDesc","images","setImages","error","setError","navigate","cookieId","document","cookie","split","addHandler","e","preventDefault","console","log","length","title","message","params","img1","img2","img3","img4","img5","long_desc","Math","random","short_desc","query","stringify","response","postAddProduct","onChange","target","marginTop","imagePreview","map","i"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport './AddProduct.css';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport PageContainer from \"../pageContainer/PageContainer\";\r\nimport Card from \"../UI/Card\";\r\nimport Input from \"../UI/Input\";\r\nimport { onBlurHandler, onChangeHanlder, onFileHandler, validLength, validNumber, validRequire } from \"../../util/validators\";\r\nimport { setTouched } from \"../hook/lib\";\r\nimport ErrorModal from \"../UI/ErrorModal\";\r\nimport FilePicker from \"../UI/FilePicker\";\r\nimport queryString from \"query-string\";\r\nimport ProductAPI from \"../../API/ProductAPI\";\r\nimport Image from \"../UI/Image\";\r\nimport { generateBase64FromImage } from \"../../util/image\";\r\n\r\nconst AddProduct = () => {\r\n  const [name, setName] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [category, setCategory] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [price, setPrice] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validNumber({ min: 1 }), validRequire]\r\n  });\r\n  const [shortDesc, setShortDesc] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [longDesc, setLongDesc] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validLength({ min: 4 }), validRequire]\r\n  });\r\n  const [images, setImages] = useState({\r\n    value: '',\r\n    valid: false,\r\n    touched: false,\r\n    validators: [validRequire]\r\n  });\r\n  const [error, setError] = useState();\r\n  const navigate = useNavigate();\r\n  const cookieId = document.cookie.split('=')[1];\r\n\r\n  const addHandler = async(e) => {\r\n    e.preventDefault();\r\n\r\n    console.log(images.value.length > 5);\r\n\r\n    setTouched(setName);\r\n    setTouched(setCategory);\r\n    setTouched(setShortDesc);\r\n    setTouched(setLongDesc);\r\n\r\n    if(images.value.length > 5) {\r\n      setError({\r\n        title: 'Images invalid',\r\n        message: 'Limit 5 images!'\r\n      })\r\n      return;\r\n    }\r\n\r\n    if(\r\n      !name.valid ||\r\n      !category.valid ||\r\n      !price.valid ||\r\n      !shortDesc.valid ||\r\n      !longDesc.valid\r\n    ) {\r\n      console.log('ok');\r\n      const params = {\r\n        category: category.value,\r\n        img1: images.value[0],\r\n        img2: images.value[1],\r\n        img3: images.value[2],\r\n        img4: images.value[3],\r\n        img5: images.value[4],\r\n        long_desc: longDesc.value,\r\n        name: name.value,\r\n        price: Math.random(),\r\n        short_desc: shortDesc.value,\r\n        price: price.value,\r\n        cookieId: cookieId\r\n      }\r\n      const query = '?' + queryString.stringify(params);\r\n      const response = await ProductAPI.postAddProduct(query);\r\n      console.log(response);\r\n    } else {\r\n      console.log('no');\r\n    }\r\n  }\r\n\r\n  const onChange = e => {\r\n    console.log(e.target)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <ErrorModal\r\n          title={error.title}\r\n          message={error.message}\r\n          onConfirm={() => setError(null)}\r\n          error={!!error}\r\n        />\r\n      )}\r\n      <PageContainer>\r\n        <Card className=\"ahCard\">\r\n          <div className=\"listTitle ahListTitle\">add product</div>\r\n        </Card>\r\n        <Card className=\"ahCardForm\">\r\n          <form className=\"ahFormControl\">\r\n            <Input \r\n              control=\"input\"\r\n              id=\"name\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Product Name\"\r\n              label=\"Product Name\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setName, name.validators)}\r\n              onBlur={e => onBlurHandler(e, setName, name.validators)}\r\n              value={name.value}\r\n              isValid={name.valid}\r\n              isTouched={name.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"category\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Category\"\r\n              label=\"Category\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setCategory, category.validators)}\r\n              onBlur={e => onBlurHandler(e, setCategory, category.validators)}\r\n              value={category.value}\r\n              isValid={category.valid}\r\n              isTouched={category.touched}\r\n            />\r\n            <Input \r\n              control=\"input\"\r\n              id=\"price\"\r\n              type=\"Number\"\r\n              placeholder=\"Enter price\"\r\n              label=\"price\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setPrice, price.validators)}\r\n              onBlur={e => onBlurHandler(e, setPrice, price.validators)}\r\n              value={price.value}\r\n              isValid={price.valid}\r\n              isTouched={price.touched}\r\n              min={1}\r\n            />\r\n            <Input \r\n              control=\"textarea\"\r\n              id=\"shortDesc\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Short Description\"\r\n              label=\"Short Description\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setShortDesc, shortDesc.validators)}\r\n              onBlur={e => onBlurHandler(e, setShortDesc, shortDesc.validators)}\r\n              value={shortDesc.value}\r\n              isValid={shortDesc.valid}\r\n              isTouched={shortDesc.touched}\r\n              rows={5}\r\n              cols={5}\r\n            />\r\n            <Input \r\n              control=\"textarea\"\r\n              id=\"longDesc\"\r\n              type=\"text\"\r\n              placeholder=\"Enter Long Description\"\r\n              label=\"Long Description\"\r\n              required={true}\r\n              onChange={e => onChangeHanlder(e, setLongDesc, longDesc.validators)}\r\n              onBlur={e => onBlurHandler(e, setLongDesc, longDesc.validators)}\r\n              value={longDesc.value}\r\n              isValid={longDesc.valid}\r\n              isTouched={longDesc.touched}\r\n              rows={5}\r\n              cols={5}\r\n            />\r\n            <FilePicker\r\n              control=\"input\"\r\n              id=\"images\"\r\n              placeholder=\"Enter Images\"\r\n              label=\"Upload image (5 images)\"\r\n              required={true}\r\n              onChange={e => onFileHandler(e, setImages)}\r\n              multiple={true}\r\n            />\r\n            <div style={{ marginTop: '15px' }}>\r\n              {images.imagePreview && \r\n                images.imagePreview.map(i => <Image imageUrl={i} key={i} contain />)\r\n              }\r\n            </div>\r\n            <button \r\n              className=\"btnSend\"\r\n              onClick={addHandler}\r\n            >Submit\r\n            </button>\r\n          </form>\r\n        </Card>\r\n      </PageContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}